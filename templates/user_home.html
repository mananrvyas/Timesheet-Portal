<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Home</title>
    <link rel="stylesheet" href="static/css/user_css.css">
</head>
<body>
<!-- Place this block at the top of your HTML body -->
{% with messages = get_flashed_messages() %}
  {% if messages %}
    <ul class="flashes">
    {% for message in messages %}
      <li>{{ message }}</li>
    {% endfor %}
    </ul>
  {% endif %}
{% endwith %}
    <div class="user-container">
        <h1>Welcome, {{ user.username }}</h1>

        <!-- Displaying Default Schedule -->
<!--        <section>-->
<!--            <h2>Default Schedule</h2>-->
<!--            <form id="default-schedule-form" action="/edit_schedule" method="post">-->
<!--                <div class="schedule-day">-->
<!--                    <h3>Monday</h3>-->
<!--                    &lt;!&ndash; Slot 1 &ndash;&gt;-->
<!--                    <label for="monday-1-start">Start:</label>-->
<!--                    <input type="time" id="monday-1-start" name="monday-1-start" value="{{ user.default_schedule['Monday'][0].get_start().strftime('%H:%M') if user.default_schedule['Monday'] else '' }}">-->
<!--                    <label for="monday-1-end">End:</label>-->
<!--                    <input type="time" id="monday-1-end" name="monday-1-end" value="{{ user.default_schedule['Monday'][0].get_end().strftime('%H:%M') if user.default_schedule['Monday'] else '' }}">-->
<!--                    &lt;!&ndash; Add more slots as needed &ndash;&gt;-->
<!--                </div>-->
<!--                {% for day, slots in user.default_schedule.items() %}-->
<!--                <div class="schedule-day">-->
<!--                    <h3>{{ day }}</h3>-->
<!--                    <ul>-->
<!--                        {% for slot in slots %}-->
<!--                        <li>{{ slot.get_start().strftime('%H:%M') }} - {{ slot.get_end().strftime('%H:%M') }}</li>-->
<!--                        {% endfor %}-->
<!--                    </ul>-->
<!--                    &lt;!&ndash; TODu &ndash;&gt;-->
<!--                    &lt;!&ndash; Users can add or remove time slots &ndash;&gt;-->
<!--                </div>-->
<!--                {% endfor %}-->
<!--                <button type="submit">Update Schedule</button>-->
<!--            </form>-->
<!--        </section>-->

<!--        ##################################-->
<!--        <section>-->
<!--    <h2>Default Schedule</h2>-->
<!--    <form id="default-schedule-form" action="/edit_schedule" method="post">-->
<!--        {% for day in ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'] %}-->
<!--    <div class="schedule-day">-->
<!--        <h3>{{ day }}</h3>-->
<!--        {% for slot_index in range(user.default_schedule[day]|length) %}-->
<!--            <div class="timeslot">-->
<!--                <label for="{{ day.lower() }}-{{ slot_index + 1 }}-start">Start:</label>-->
<!--                <input type="time" id="{{ day.lower() }}-{{ slot_index + 1 }}-start" name="{{ day.lower() }}-{{ slot_index + 1 }}-start" value="{{ user.default_schedule[day][slot_index].get_start().strftime('%H:%M') }}">-->
<!--                <label for="{{ day.lower() }}-{{ slot_index + 1 }}-end">End:</label>-->
<!--                <input type="time" id="{{ day.lower() }}-{{ slot_index + 1 }}-end" name="{{ day.lower() }}-{{ slot_index + 1 }}-end" value="{{ user.default_schedule[day][slot_index].get_end().strftime('%H:%M') }}">-->
<!--                <div class="timeslot" id="{{ day.lower() }}-{{ slot_index }}-slot">-->
<!--                    &lt;!&ndash; Existing timeslot inputs and labels &ndash;&gt;-->
<!--                    <button type="button" onclick="deleteTimeslot('{{ day }}', '{{ slot_index }}')">Delete</button>-->
<!--                </div>-->

<!--            </div>-->
<!--        {% endfor %}-->
<!--        {% if user.default_schedule[day]|length < 2 %}-->
<!--            &lt;!&ndash; Only show the add button if there are less than 2 timeslots &ndash;&gt;-->
<!--            <button type="button" onclick="addTimeslot('{{ day }}')">Add Timeslot</button>-->
<!--        {% endif %}-->
<!--    </div>-->
<!--{% endfor %}-->

<!--        <button type="submit">Update Schedule</button>-->
<!--        {% for day, slots in user.default_schedule.items() %}-->
<!--                <div class="schedule-day">-->
<!--                    <h3>{{ day }}</h3>-->
<!--                    <ul>-->
<!--                        {% for slot in slots %}-->
<!--                        <li>{{ slot.get_start().strftime('%H:%M') }} - {{ slot.get_end().strftime('%H:%M') }}</li>-->
<!--                        {% endfor %}-->
<!--                    </ul>-->
<!--                    &lt;!&ndash; TODu &ndash;&gt;-->
<!--                    &lt;!&ndash; Users can add or remove time slots &ndash;&gt;-->
<!--                </div>-->
<!--                {% endfor %}-->
<!--    </form>-->
<!--</section>-->
<!--        ##################################-->
 <section>
            <h2>Default Schedule</h2>
            <form id="default-schedule-form" action="/edit_schedule" method="post">
                {% for day in ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'] %}
                <div class="schedule-day" data-day="{{ day }}">
                    <h3>{{ day }}</h3>
                    <div id="{{ day.lower() }}-timeslots">
                        {% for slot_index in range(user.default_schedule[day]|length) %}
                        <div class="timeslot">
                            <!-- Display existing timeslots here -->
                            <label for="{{ day.lower() }}-{{ slot_index + 1 }}-start">Start:</label>
                            <input type="time" id="{{ day.lower() }}-{{ slot_index + 1 }}-start" name="{{ day.lower() }}-{{ slot_index + 1 }}-start" value="{{ user.default_schedule[day][slot_index].get_start().strftime('%H:%M') }}">
                            <label for="{{ day.lower() }}-{{ slot_index + 1 }}-end">End:</label>
                            <input type="time" id="{{ day.lower() }}-{{ slot_index + 1 }}-end" name="{{ day.lower() }}-{{ slot_index + 1 }}-end" value="{{ user.default_schedule[day][slot_index].get_end().strftime('%H:%M') }}">
                                            <div class="timeslot" id="{{ day.lower() }}-{{ slot_index }}-slot">
                    <!-- Existing timeslot inputs and labels -->
                    <button type="button" onclick="deleteTimeslot('{{ day }}', '{{ slot_index }}')">Delete</button>
                </div>
                        </div>
                        {% endfor %}
                    </div>
                    {% if user.default_schedule[day]|length < 2 %}
                        <button type="button" onclick="addTimeslot('{{ day }}')">Add Timeslot</button>
                    {% endif %}
                </div>
                {% endfor %}
                <button type="submit">Update Schedule</button>
            </form>
        </section>

        <!-- Form to Submit a New Timesheet -->
<!--        <section>-->
<!--            <h2>Submit Timesheet for Current Pay Period</h2>-->
<!--            <form id="timesheet-form" action="/submit_timesheet" method="post">-->
<!--                &lt;!&ndash; Fields to input timeslot details &ndash;&gt;-->
<!--                <input type="date" name="date" required>-->
<!--                <input type="time" name="start_time" required>-->
<!--                <input type="time" name="end_time" required>-->
<!--                <button type="submit">Add Timeslot</button>-->
<!--            </form>-->
<!--        </section>-->
<!--        -->
        <section>
    <h2>Submit Timesheet</h2>
    <button type="button" onclick="showTimesheetForm()">Submit Timesheet</button>
    <div id="timesheet-form-container" style="display: none;">
        <form id="timesheet-form" action="/submit_timesheet" method="post">
            <label for="pay-period-select">Select Pay Period:</label>
            <select id="pay-period-select" name="pay_period">
                <!-- JavaScript will populate this -->
            </select>

            <div id="timesheet-dates-container">
                <!-- JavaScript will populate this -->
            </div>

            <button type="submit">Submit Timesheet</button>
        </form>
    </div>
</section>
<script src="../static/js/timesheet_scripts.js"></script>




        <!-- Section to View Past Timesheets -->
        <section>
            <h2>Past Timesheets</h2>
            <!-- Dropdown to select pay period -->
            <select id="pay-period-selector">
                {% for timesheet in user.timesheets %}
                <option value="{{ timesheet.pay_period }}">{{ timesheet.pay_period }}</option>
                {% endfor %}
            </select>
            <div id="timesheet-display">
                <!-- Render timesheet data for selected pay period -->
                <!-- This will be populated with JS or server-side logic -->
            </div>
        </section>
    </div>

    <script src="../static/js/user_scripts.js"></script>
</body>
</html>
